{% extends 'shop/layouts/main.html' %}
{% block title %}
ShopKart | Cart
{% endblock title %}        
 {% block content %}
 <div class="container " style="margin-top: 80px;">
    <div class="row">
     <div class="col-12">
         <h4>Cart</h4> 
         <hr style="border-color: #404141;">
     </div>
    </div>
   <section class="my-3">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <table class="table table-borderless" >
                    <thead>
                      <tr>
                        <th scope="col">Product</th>
                        <th scope="col">Name</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Price</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Remove</th>
                       
                      </tr>
                    </thead>
                    <tbody>
                        {% for i in carts %}
                      <tr>
                        <td><img src="{{ i.product.product_image.url }}" height="75px" alt="{{ carts.product.name}} logo"></td>
                        <td>{{i.product.name}}</td>
                        <td>{{i.product_qty}}</td>
                        <td>₹{{i.product.new_price | stringformat:'d' }}</td>
                        <td class="amt">{{i.total | stringformat:'d' }}</td>
                        <td ><a href="{% url 'cart' i.id %}" class="btn btn-danger btn-sm" id="btnremove" onclick="return confirm('Are you sure ? remove');"><i class="fa fa-trash"></i></a></td>
                       
                      </tr>
                      {% endfor %}
                     <tr >
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td ><b>Total</b></td>
                        <td id="net"></td>
                     </tr>
                    </tbody>
                  </table>
            </div>
        </div>
    </div>
   </section>
  </div>
  <script>
    const nodes = document.querySelectorAll('.amt'); 

const arr = Array.from(nodes); 
const res = arr.reduce((acc, curr) => {
    const value = parseFloat(curr.textContent.trim(),10); console.log(value); 
    const num = parseFloat(value); 
    
    if (!isNaN(num)) {
        acc += num;
    }

     return acc;
}, 0);

document.getElementById("net").innerHTML='₹'+res; 
 </script> 
 {% endblock content %}   